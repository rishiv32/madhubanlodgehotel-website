
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lock Screen Password</title>
  <style>
    :root{
      --bg: #f6f7fb;
      --fg: #0b0b0f;
      --muted:#6b7280;
      --primary:#16a34a; /* green */
      --card:#ffffff;
      --key:#f1f5f9;
      --key-press:#e2e8f0;
      --ring:#c7d2fe;
      --danger:#ef4444;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: var(--bg);
      color: var(--fg);
      display:grid; place-items:center;
    }
    .phone{
      width:min(420px, 95vw);
      background:var(--card);
      border-radius:24px;
      box-shadow:0 20px 60px rgba(0,0,0,.10), 0 8px 24px rgba(0,0,0,.06);
      padding:24px 20px 28px;
    }
    header{
      display:flex; align-items:center; gap:12px; color:var(--muted); font-size:14px; margin-bottom:6px;
    }
    header a{color:var(--primary); text-decoration:none}
    h1{font-size:18px; font-weight:600; margin:0 0 8px}
    .hint{font-size:14px; color:var(--muted); margin-bottom:16px}

    .display{display:flex; align-items:center; justify-content:center; gap:10px; margin: 16px auto 6px; min-height:42px;}
    .dot{ width:12px; height:12px; border-radius:50%; background:#d1d5db; }
    .dot.filled{ background:#111827; }

    .actions{ display:flex; justify-content:center; align-items:center; gap:10px; margin-bottom:6px; }
    .eye{ border:0; background:transparent; cursor:pointer; padding:6px 10px; border-radius:10px; color:var(--muted); }

    .keypad{ display:grid; grid-template-columns:repeat(3, 1fr); gap:14px; width:100%; margin-top:8px; }
    .key{ background:var(--key); border:0; border-radius:16px; height:64px; font-size:24px; font-weight:600; cursor:pointer; box-shadow: inset 0 -1px 0 rgba(0,0,0,.04); }
    .key:active{ background:var(--key-press); }

    .error{ color:var(--danger); text-align:center; font-size:14px; min-height:20px; margin-top:8px; }

    /* New unlocked screen */
    .unlocked { display:none; text-align:center; padding:40px; }
    .unlocked button{
      background:var(--primary);
      border:none;
      color:white;
      font-size:18px;
      padding:16px 28px;
      border-radius:12px;
      cursor:pointer;
      box-shadow:0 4px 12px rgba(0,0,0,0.1);
    }
    .unlocked button:hover{ background:#15803d; }
  </style>
</head>
<body>
  <main class="phone" id="lockScreen">
    <header>
      <a href="#" id="cancel">Cancel</a>
  
    </header>

    <h1 id="title">Enter password</h1>
    <p class="hint" id="subtitle">‚Ä¢ ‚Ä¢ ‚Ä¢ ‚Ä¢ ‚Ä¢ ‚Ä¢</p>

    <div class="display" id="pinDots"></div>
    <div class="actions">
      <button class="eye" id="toggleMask">üëÅÔ∏è</button>
    </div>

    <section class="keypad"></section>
    <div id="msg" class="error"></div>
  </main>

  <!-- New Screen -->
  <main class="phone unlocked" id="unlockedScreen">
    <h1>Unlocked ‚úÖ</h1>
    <p>You now have access.</p>
    <a href="https://www.google.com" target="_blank">
      <button>Link a Device</button>
    </a>
  </main>

  <script>
    const PIN_LENGTH = 6;
    const $ = (sel) => document.querySelector(sel);
    function toHex(buffer){return [...new Uint8Array(buffer)].map(b=>b.toString(16).padStart(2,'0')).join('');}
    async function sha256(text){const data = new TextEncoder().encode(text); const hash = await crypto.subtle.digest('SHA-256', data); return toHex(hash);}

    let typed = '';
    let masked = true;

    const title = $('#title');
    const subtitle = $('#subtitle');
    const msg = $('#msg');
    const dots = $('#pinDots');
    const keypad = document.querySelector('.keypad');
    const eye = $('#toggleMask');
    const lockScreen = $('#lockScreen');
    const unlockedScreen = $('#unlockedScreen');

    function renderDots(){
      dots.innerHTML = '';
      for(let i=0;i<PIN_LENGTH;i++){
        const d = document.createElement('div');
        d.className = 'dot'+(i<typed.length? ' filled':'');
        dots.appendChild(d);
      }
      subtitle.textContent = masked && typed.length>0 ? '‚Ä¢'.repeat(typed.length).padEnd(PIN_LENGTH,'‚Ä¢') : ''.padEnd(PIN_LENGTH,'‚Ä¢');
    }

    function resetTyped(){ typed=''; renderDots(); }

    async function handleComplete(){
      const hash = await sha256(typed);
      // default pin = "123456" hashed
      const defaultHash = await sha256("123456");
      if(hash === (localStorage.getItem('pinHash')||defaultHash)){
        lockScreen.style.display = 'none';
        unlockedScreen.style.display = 'block';
      } else {
        msg.textContent = 'Incorrect PIN';
      }
      resetTyped();
    }

    function createKeys(){
      const order = ['1','2','3','4','5','6','7','8','9','-','0','back'];
      order.forEach(k=>{
        const btn = document.createElement('button');
        btn.className = 'key';
        if(k==='-'){
          btn.disabled = true; btn.style.visibility='hidden';
        }else if(k==='back'){
          btn.textContent = '‚å´';
          btn.addEventListener('click',()=>{
            typed = typed.slice(0,-1);
            renderDots();
            msg.textContent='';
          });
        }else{
          btn.textContent = k;
          btn.addEventListener('click',()=>{
            if(typed.length>=PIN_LENGTH) return;
            typed += k;
            renderDots();
            msg.textContent='';
            if(typed.length===PIN_LENGTH) handleComplete();
          });
        }
        keypad.appendChild(btn);
      });
    }

    window.addEventListener('keydown', (e)=>{
      if(/^[0-9]$/.test(e.key)){
        if(typed.length<PIN_LENGTH){
          typed+=e.key; renderDots(); msg.textContent='';
          if(typed.length===PIN_LENGTH) handleComplete();
        }
      } else if(e.key==='Backspace'){
        typed=typed.slice(0,-1); renderDots();
      }
    });

    eye.addEventListener('click',()=>{
      masked = !masked;
      eye.textContent = masked ? 'üëÅÔ∏è' : 'üôà';
      renderDots();
    });

    createKeys();
    renderDots();
  </script>
</body>
</html>
